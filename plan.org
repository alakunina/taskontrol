#+STARTUP: hidestars
#+STARTUP: odd
#+STARTUP: showall


* TASKontrol
*** SMclient/RTLSMclient
***** TODO SetStateMatrix() [2/3]
******* DONE sendmatrix() which uses socket.socket.send()
******* DONE basic matrix
******* TODO with schedule waves
***** TODO [#C] GetStateProgram() :EMBEDDED_C:
***** TODO [#C] SetStateProgram() :EMBEDDED_C:
***** DONE GetStateMachine()
***** DONE SetStateMachine()
***** DONE GetOutputRouting()
***** DONE SetOutputRouting()
***** DONE SetScheduledWavesDIO()
***** TODO SetScheduledWavesAO()
***** TODO [#C] StartDAQ()
***** TODO [#C] GetDAQScans()
***** DONE [#C] StopDAQ()
***** TODO [#C] RegisterEventsCallback()
***** TODO [#C] StopEventsCallback()
***** DONE GetEvents() (new and old versions)
***** DONE GetTime()
***** DONE GetTimeEventsAndState()
***** TODO GetAIMode()
***** TODO SetAIMode()
***** DONE ForceState() and similar ones
      I will not implement any other besides the generic ForceState().
***** TODO SetStateProgram(), GetStateProgram()
*** SoundClient
*** Solo-like graphical module
*** Dispatcher-like module


* Bugs and fixes:
*** TODO I have been using =smIDstr.split()[0]= to extract values,
    but maybe this will change if I split things in DoQueryCmd()
*** DONE I seem to be sending extra strings after GetEvents()
    The server says: "Got:  " and then "Connection to host ended..."
    SOLUTION: I just had to restart the FSM server to avoid this.
*** TODO Check if realines can be done by reading up to a line-break
    Probably not, because if server sends a byte representing the same
    as a '\n', there is no way to tell which one of the two it was.
*** TODO Socket timeout is a weird way of stop receiving from socket.
    Although I don't know if there is a better way.  Note: I had to
    increase the timeout to avoid raising exceptions all time. So
    while in the C code it was 1ms, in the python client it is
    100ms. See NetClient.cpp: NetClient::receiveLines()
*** TODO GetTimeEventsAndState repeats code from DoQueryMatrixCmd
    It should be more modular.
*** TODO Many methods request one parameter (bool, int or float) and OK.
    There should be a method for this.
*** TODO Make orouting a dict instead of a class
*** TODO Antipatterns:
***** http://en.wikipedia.org/wiki/Sequential_coupling (on smclient)
***** http://en.wikipedia.org/wiki/BaseBean (on netclient)



* Questions:
*** What is the state matrix column called CONT_OUT in SetStateMatrix?
*** What is the state matrix column called TRIG_OUT in SetStateMatrix?
*** What does BypassDout() do?
    The comment says that it sets outputs to be whatever the state
    machine would indicate, bitwise or `d with "d."


* Python style
*** Style guide: http://www.python.org/dev/peps/pep-0008/
*** Unofficial guide: http://jaynes.colorado.edu/PythonGuidelines.html
*** TODO Do not compare with == (singleton), use 'is'
*** DONE Use .join() instead of +=
*** TODO Be explicit about which exception is catched
*** DONE endswith() instead of slicing string
*** DONE Use isinstance(obj, int) instead of comparing types
*** TODO Don't compare boolean values to True or False using ==
*** TODO Use code-testing: :CODE_TESTING:
    http://docs.python.org/library/doctest.html
    http://docs.python.org/library/unittest.html


* Notes on developing in python:
*** Ipython:
***** Debugger:
******* Running 'run -d script' did not work:
	"AttributeError: Pdb instance has no attribute 'curframe'"
	https://bugs.launchpad.net/ubuntu/+source/ipython/+bug/381069
	But running "ipython -pdb" worked.
******* Trying to use pydb failed because it installed only for python2.4
******* SOLUTION: running 'ipython -pdb' worked fine.
***** TAB-autocompletion:
      It adds a blank space after the completion, very annoying.
      Try for example: cd /hom<TAB>
      http://mail.scipy.org/pipermail/ipython-user/2005-March/002612.html
***** Profiler has to be installed separately because of its license:
      The Debian package is called 'python-profiler'.
      In any case, it didn't really work the way I wanted. Gotta try again.


* Links and tips on tools:
*** Git:
    Crash course: http://git-scm.com/course/svn.html 
    For the lazy: http://www.spheredev.org/wiki/Git_for_the_lazy
    In emacs    : http://parijatmishra.wordpress.com/2008/09/06/up-and-running-with-emacs-and-git/
    In Ubuntu   : https://help.ubuntu.com/community/Git
*** Org-mode:
    Manual: http://orgmode.org/manual
*** Matlab (C++ API)
    http://www.mathworks.com/access/helpdesk/help/techdoc/index.html?/access/helpdesk/help/techdoc/apiref/mxgetpr.html&http://www.google.com/search?q=mxGetPr&ie=utf-8&oe=utf-8
*** Python
    Tutorial: http://docs.python.org/tutorial/
    Reference: http://docs.python.org/reference/
    TIP: range(*args)   # call with arguments unpacked from a list
    Struct (and info on type sizes): http://docs.python.org/library/struct.html
*** Emacs
    Hideshow minor mode: http://www.gnu.org/software/emacs/manual/html_node/emacs/Hideshow.html


* Misc:
*** I can't run the emulator on Ubuntu 9.10 because of a bug (in glibc?) about threads.
    It run fine on Ubuntu 9.04. I think the bug is related to:
    https://bugs.launchpad.net/ubuntu/+source/glib2.0/+bug/453898
